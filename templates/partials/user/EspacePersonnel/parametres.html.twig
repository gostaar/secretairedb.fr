{% extends 'base.html.twig' %}

{% block title %}Dashboard utilisateur{% endblock %}

{% block body %}
    <div id="userContent" class="custom-bg d-flex flex-column min-vh-100">
        {% include 'userPage/_header.html.twig' %}
        <main id="fragmentContent" class="container d-flex flex-column justify-content-start flex-grow-1 py-4">
            {% include 'partials/flash.html.twig' %}
            <!-- Main Content -->
                <div class="flex-grow-1 p-4 d-flex flex-column">
                    <div class="container card mb-4">
                        <div class="container card-header d-flex justify-content-between align-items-center">
                            <h4>Paramètres</h4>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-warning" role="alert">
                                <strong>En développement !</strong> Certaines fonctionnalités sont encore en développement et peuvent ne pas fonctionner correctement. Merci de votre compréhension.
                            </div>
                        </div>
                        <div class="card-body">
                            <form action="/update-settings" method="POST">
                                <div class="mb-3">
                                    <label for="setting1" class="form-label">Exporter mes données pour le service:</label>
                                    <select class="form-select" id="setting1" name="setting1">
                                    {% for s in services %}
                                        <option value="{{s.id}}">{{s.name}}</option>
                                    {% endfor %}
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary">Exporter</button>
                            </form>
                        </div>
                        {# <div class="card-body">
                            <form action="/update-settings" method="POST">
                                <div class="mb-3">
                                    <label for="theme" class="form-label">Choisir un thème</label>
                                    <select class="form-select" id="theme" name="theme">
                                        <option value="light">Clair</option>
                                        <option value="dark">Sombre</option>
                                        <option value="blue">Bleu</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary">Sauvegarder</button>
                            </form>
                        </div> #}
                        <div class="card-body">
                            <h5>Changer votre mot de passe</h5>
                            {{ form_start(form) }}
                                <div class="mb-3">
                                    {{ form_label(form.currentPassword) }}
                                    {{ form_widget(form.currentPassword) }}
                                    {{ form_errors(form.currentPassword) }}
                                </div>
                                <div class="mb-3">
                                    {{ form_label(form.newPassword) }}
                                    {{ form_widget(form.newPassword) }}
                                    {{ form_errors(form.newPassword) }}
                                </div>
                                <div class="mb-3">
                                    {{ form_label(form.confirmPassword) }}
                                    {{ form_widget(form.confirmPassword) }}
                                    {{ form_errors(form.confirmPassword) }}
                                </div>

                                <button class='mb-3 btn btn-primary' type="submit">Modifier</button>
                            {{ form_end(form) }}
                            {# <form action="/change-password" method="POST">
                                <div class="mb-3">
                                    <label for="current-password" class="form-label">Mot de passe actuel</label>
                                    <input type="password" class="form-control" id="current-password" name="current-password" required>
                                </div>
                                <div class="mb-3">
                                    <label for="new-password" class="form-label">Nouveau mot de passe</label>
                                    <input type="password" class="form-control" id="new-password" name="new-password" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Changer le mot de passe</button>
                            </form> #}
                        </div>
                    </div>
                </div>
        </main>

        {% include 'userPage/_footer.html.twig' %}
    </div>
{% endblock %}
